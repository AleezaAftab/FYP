
@{
    ViewData["Title"] = "WhishList";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Breadcrumb Area -->
<section class="breadcrumb-area">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="breadcrumb-box text-center">
                    <ul class="list-unstyled list-inline">
                        <li class="list-inline-item"><a href="/">Home</a></li>
                        <li class="list-inline-item"><span>||</span> Wishlist</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- End Breadcrumb Area -->
<!-- Wishlist -->
<section class="shopping-cart">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <script>
                    function TestI(id) {
                        $.ajax({
                                                                /* the route pointing to the post function */
                                                                url: '/Home/AddtoCart?product_id=' + id,
                                                                type: 'GET',
                                                                /* send the csrf-token and the input to the controller */
                                                                data: {},
                                                                /* remind that 'data' is the response of the AjaxController */
                                                                success: function (data) {
                                                                    if (data == 200) {
                                                                        var cardcount = document.getElementById('cardcount');
                                                                        var count = parseInt(cardcount.innerHTML) + 1;
                                                                        cardcount.innerHTML = count.toString();

                                                                        Swal.fire({
                                                                            title: 'Success!',
                                                                            text: 'Product added into cart',
                                                                            icon: 'success',
                                                                        })
                                                                    } else {
                                                                        Swal.fire({
                                                                            title: 'Success!',
                                                                            text: 'Already addd',
                                                                            icon: 'success',
                                                                        })
                                                                    }

                                                                }
                        });

                    }
                </script>
                <div class="cart-table wsh-list table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th class="t-pro">Product</th>
                                <th class="t-price">Price</th>
                                <th class="t-total">Add To Cart</th>
                                <th class="t-rem"></th>
                            </tr>
                        </thead>
                        <tbody>

                            @foreach (var item in ViewBag.wish_list)
                            {

                            <tr>
                                <td class="t-pro d-flex">
                                    <div class="t-img">
                                        <a href="#"><img src="/@item.product_image" style="height: 100px;width: 100px;" alt=""></a>
                                    </div>
                                    <div class="t-content">
                                        <p class="t-heading"><a href="#">@item.product_name</a></p>
                                    </div>
                                </td>
                                <td class="t-price">PAK @item.product_price</td>

                                <td class="t-add">

                                    @{

                                        var enable = false;
                                        if (item.product_quantity > 0)
                                        {
                                            enable = true;
                                        }

                                    }
                                    @if (enable)
                                    {
                                        <button onclick="TestI(@item.product_id);" type="button" name="button">Add to Cart</button>
                                    }
                                    else
                                    {
                                        <button disabled  type="button"  style="background: gray;" name="button">Add to Cart</button>
                                    }

                                </td>
                                <td class="t-rem"><a href="/Home/DeleteWhishList/@item.id"><i class="fa fa-trash-o"></i></a></td>

                            </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>
